CREATE TABLE EDITORIAL(
    NOMBRE CHAR(10),
    DIRECCION VARCHAR2(20),
    TELEFONO NUMBER(10),
    CONSTRAINT ED_PK PRIMARY KEY(NOMBRE)
);

CREATE TABLE PUBLICACION(
    ISBN NUMBER(10),
    AUTORES VARCHAR2(20),
    TITULO VARCHAR2(20),
    IDIOMA VARCHAR2(10),
    NEDITORIAL CHAR(10),
    CONSTRAINT PU_PK PRIMARY KEY(ISBN),
    CONSTRAINT PU_FK FOREIGN KEY(NEDITORIAL) REFERENCES EDITORIAL
);

CREATE TABLE REVISTA(
    ISBN NUMBER(10),
    PERIODO DATE,
    CONSTRAINT RE_PK PRIMARY KEY(ISBN),
    CONSTRAINT RE_FK FOREIGN KEY(ISBN) REFERENCES PUBLICACION
);

CREATE TABLE LIBRO(
    ISBN NUMBER(10),
    EDICION NUMBER(2),
    ANIO DATE,
    CONSTRAINT LI_PK PRIMARY KEY(ISBN),
    CONSTRAINT LI_FK FOREIGN KEY(ISBN) REFERENCES PUBLICACION
);

CREATE TABLE BIBLIOTECA(
    DISTRITO CHAR(10),
    DIRECCION VARCHAR(20),
    CONSTRAINT BI_PK PRIMARY KEY(DISTRITO)
);

CREATE TABLE EJEMPLAR_LIBRO(
    ISBN NUMBER(10),
    DISTRITO CHAR(10),
    NUMERO NUMBER(5),
    FECHACOMPRA DATE,
    CONSTRAINT EJ_PK PRIMARY KEY(NUMBER),
    CONSTRAINT EJ_FK1 FOREIGN KEY(ISBN) REFERENCES LIBRO,
    CONSTRAINT EJ_FK2 FOREIGN KEY(DISTRITO) REFERENCES BIBLIOTECA
);

CREATE TABLE SOCIO(
    NCARNET NUMBER(10),
    NOMBRE  CHAR(10),
    DNI     VARCHAR2(9),
    EMAIL   VARCHAR2(15),
    DISTRITO CHAR(10),
    CONSTRAINT SO_PK PRIMARY KEY(NCARNET),
    CONSTRAINT SO_FK FOREIGN KEY(DISTRITO) REFERENCES BIBLIOTECA
);

CREATE TABLE PRESTAMO(
    NSOCIO NUMBER(10),
    FECHAPRESTAMO DATE,
    ISBN NUMBER(10),
    DISTRITO CHAR(10),
    NUMERO NUMBER(5),
    NUMDIAS NUMBER(5),
    CONSTRAINT PR_PK PRIMARY KEY(FECHAPRESTAMO),
    CONSTRAINT PR_FK1 FOREIGN KEY(NSOCIO) REFERENCES SOCIO,
    CONSTRAINT PR_FK2 FOREIGN KEY(ISBN) REFERENCES EJEMPLAR_LIBRO,
    CONSTRAINT NU_CK CHECK(NUMDIAS>0)
);

CREATE TABLE EJEMPLAR_REVISTA(
    ISBN NUMBER(10),
    DISTRITO CHAR(10),
    NUMERO NUMBER(5),
    FECHACOMPRA DATE,
    CONSTRAINT ER_PK PRIMARY KEY(NUMERO),
    CONSTRAINT ER_FK1 FOREIGN KEY(ISBN) REFERENCES REVISTA,
    CONSTRAINT ER_FK2 FOREIGN KEY(DISTRITO) REFERENCES BIBLIOTECA
);
